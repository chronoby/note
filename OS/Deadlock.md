# Deadlock

## 系统模型

进程使用资源：

- request
- use
- release

### 必要条件

- 互斥：至少有一个资源处于非共享模式，即一个时刻只有一个进程使用
- 占有并等待：一个进程必须占有至少一个资源，并等待另一资源，而该资源为其他进程所占有
- 非抢占
- 循环等待

### 资源分配图

## 死锁处理方法

- 使用协议预防或避免死锁，确保系统不会进入死锁状态
- 允许系统进入死锁状态，然后检测它，并家已恢复
- 忽略这个问题，认为死锁不可能在系统内发生 KISS(keep it simple and stupid)

## 死锁预防

确保至少一个必要条件不成立，就能预防死锁发生

### 互斥

- 取决于资源

### 占有并等待

必须保证，当一个进程申请一个资源时，它不能占有其他资源，有两种方式

- 在执行前申请并获得所有资源
- 申请更多资源之前，必须释放其现已分配的所有资源

### 非抢占

如果一个进程占有资源并申请另一个不能立即分配的资源，那么其现已分配的资源都可被抢占

### 循环等待

对所有资源类型进行全序排序，且要求每个进程按递增顺序来申请资源

## 死锁避免

获取以后如何申请资源的附加信息

- 每个进程说明可能需要的每种资源类型实例的最大需求
- 思索避免算法动态的检测资源分配状态以确保循环等待条件不可能成立
- 资源分配状态是由可用资源和已分配资源，及进程最大需求所决定的

### 安全状态

如果系统 能按某个顺序为每个进程分配资源并能避免死锁，那么系统状态是安全的

保证安全状态即可避免死锁

### 资源分配图算法

### 银行家算法
