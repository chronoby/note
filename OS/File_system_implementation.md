# 文件系统实现

本节讨论
- 在磁盘上如何存储和访问文件的有关问题
- 如何组织文件，分配磁盘空间，恢复空闲空间，跟踪数据位置以及其他操作系统部分给外存提供的接口

## 文件系统结构

磁盘的两个特点，使得其成为存储多个文件的方便介质：

- 可以原地重写，即可以从磁盘上读一块，修改该块并将其写会原来的位置
- 可以直接访问磁盘上的任意一块信息，因此可以方便地按顺序或随即访问文件

操作系统通过文件系统来存储、定位和提取数据，来提供对磁盘的高效访问

应用程序 -> 逻辑文件系统 -> 文件组织系统 -> 基本文件系统 -> I/O 控制 -> 设备

- I/O控制：设备驱动程序和中断处理程序，实现内存与磁盘之间的信息传输
- 基本文件系统：物理块
- 文件组织模块：逻辑块和物理块
- 逻辑文件系统：管理元数据

## 文件系统实现

在磁盘上，文件系统包括如下信息：
- 如何启动所存储的操作系统
- 总的块数
- 空闲块的数目和位置
- 目录结构
- 各个具体文件

结构：

- 引导控制块(boot control block)：从改卷引导操作系统所需要的信息。UFS称为引导块，NTFS称为分区引导扇区
- 卷控制块(volume control block)：卷的详细信息。UFS称为超级块，NTFS
